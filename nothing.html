<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
<!--For exporting to pdf using js-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js" integrity="sha512-t2JWqzirxOmR9MZKu+BMz0TNHe55G5BZ/tfTmXMlxpUY8tsTo3QMD27QGoYKZKFAraIPDhFv56HLdN11ctmiTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
<script>
  let count = parseInt('{{ gradecount }}');
  const ctx = document.getElementById('myBarChart');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ["1", "2", "3", "4"],
      datasets: [{
        label: ' ',
        data: ['{{ gradecount[0] }}',
                '{{ gradecount[1] }}',
                '{{ gradecount[2] }}',
                '{{ gradecount[3] }}'],
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(255, 159, 64, 0.2)',
          'rgba(255, 205, 86, 0.2)',
          'rgba(75, 192, 192, 0.2)'
        ],
        borderColor: [
          'rgb(255, 99, 132)',
          'rgb(255, 159, 64)',
          'rgb(255, 205, 86)',
          'rgb(75, 192, 192)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      plugins:{

        legend: { display: false, },
      },
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
<!--    , plugins: [noData] -->
  });



<!--  //noData plugin block-->
<!--  const noData = {-->
<!--    id: 'noData',-->
<!--    afterDatasetsDraw: ((chart, args, plugins) => {-->
<!--        const {-->
<!--        ctx, data, chartArea:-->
<!--        {top, bottom, left, right, width, height} }-->
<!--        = chart;-->
<!--        ctx.save();-->

<!--&lt;!&ndash;No data so want to show not available&ndash;&gt;-->
<!--        if(data.datasets.length === 0){-->
<!--    &lt;!&ndash;    Grey color for rectangle&ndash;&gt;-->
<!--            ctx.fillStyle = 'rgba(102, 102, 102, 0.5)';-->
<!--    &lt;!&ndash;    Create rectangle covering the entire chart area&ndash;&gt;-->
<!--            ctx.fillRect(left, top, width, height);-->

<!--    &lt;!&ndash;    Text&ndash;&gt;-->
<!--            ctx.font = 'bold 30px sans-serif';-->
<!--            ctx.fillStyle = 'black';-->
<!--            ctx.textAlign = 'center';-->
<!--            ctx.fillText('No Data Available', left + width / 2, right + width / 2)-->
<!--        }-->
<!--    })-->
<!--  };-->
</script>


<script>
  let count = parseInt('{{ gradecount }}');
  const ctx = document.getElementById('myBarChart');
    // setup
    const data = {
      labels: ["1", "2", "3", "4"],
      datasets: [{
        label: 'Weekly Sales',
        data: ['{{ gradecount[0] }}',
                '{{ gradecount[1] }}',
                '{{ gradecount[2] }}',
                '{{ gradecount[3] }}'],
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(255, 159, 64, 0.2)',
          'rgba(255, 205, 86, 0.2)',
          'rgba(75, 192, 192, 0.2)'
        ],
        borderColor: [
          'rgb(255, 99, 132)',
          'rgb(255, 159, 64)',
          'rgb(255, 205, 86)',
          'rgb(75, 192, 192)'
        ],
        borderWidth: 1
      }]
    };

    // config
    const config = {
      type: 'bar',
      data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
      plugins: [noData]
    };

    // render init block
    const myChart = new Chart(
      document.getElementById('myBarChart'),
      config
    );

    //noData plugin block
    const noData = {
    id: 'noData',
    afterDatasetsDraw: ((chart, args, plugins) => {
        const {
        ctx, data, chartArea:
        {top, bottom, left, right, width, height} }
        = chart;
        ctx.save();

<!--No data so want to show not available-->
        if(data.datasets.length === 0){
    <!--    Grey color for rectangle-->
            ctx.fillStyle = 'rgba(102, 102, 102, 0.5)';
    <!--    Create rectangle covering the entire chart area-->
            ctx.fillRect(left, top, width, height);

    <!--    Text-->
            ctx.font = 'bold 30px sans-serif';
            ctx.fillStyle = 'black';
            ctx.textAlign = 'center';
            ctx.fillText('No Data Available', left + width / 2, right + width / 2)
        }
    })
  };
</script>

<script>
  let count = parseInt('{{ gradecount }}');
    // setup
    const data = {
      labels: ["1", "2", "3", "4"],
      datasets: [{
        label: 'Weekly Sales',
        data: ['{{ gradecount[0] }}',
                '{{ gradecount[1] }}',
                '{{ gradecount[2] }}',
                '{{ gradecount[3] }}'],
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(255, 159, 64, 0.2)',
          'rgba(255, 205, 86, 0.2)',
          'rgba(75, 192, 192, 0.2)'
        ],
        borderColor: [
          'rgb(255, 99, 132)',
          'rgb(255, 159, 64)',
          'rgb(255, 205, 86)',
          'rgb(75, 192, 192)'
        ],
        borderWidth: 1
      }]
    };

    // config
    const config = {
      type: 'bar',
      data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
      plugins: [noData]
    };

    // render init block
    const myChart = new Chart(
      document.getElementById('myBarChart'),
      config
    );

    //noData plugin block
    const noData = {
    id: 'noData',
    afterDatasetsDraw: ((chart, args, plugins) => {
        const {
        ctx, data, chartArea:
        {top, bottom, left, right, width, height} }
        = chart;
        ctx.save();

<!--No data so want to show not available-->
        if(data.datasets.length === 0){
    <!--    Grey color for rectangle-->
            ctx.fillStyle = 'rgba(102, 102, 102, 0.5)';
    <!--    Create rectangle covering the entire chart area-->
            ctx.fillRect(left, top, width, height);

    <!--    Text-->
            ctx.font = 'bold 30px sans-serif';
            ctx.fillStyle = 'black';
            ctx.textAlign = 'center';
            ctx.fillText('No Data Available', left + width / 2, right + width / 2)
        }
    })
  };
</script>














<!--5.42pm-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
<!--For exporting to pdf using js-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js" integrity="sha512-t2JWqzirxOmR9MZKu+BMz0TNHe55G5BZ/tfTmXMlxpUY8tsTo3QMD27QGoYKZKFAraIPDhFv56HLdN11ctmiTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
<script>
let count = parseInt('{{ gradecount }}');
    // setup
    const data = {
      labels: ["1", "2", "3", "4"],
      datasets: [{
        label: 'Weekly Sales',
        data: ['{{ gradecount[0] }}',
                '{{ gradecount[1] }}',
                '{{ gradecount[2] }}',
                '{{ gradecount[3] }}'],
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(255, 159, 64, 0.2)',
          'rgba(255, 205, 86, 0.2)',
          'rgba(75, 192, 192, 0.2)'
        ],
        borderColor: [
          'rgb(255, 99, 132)',
          'rgb(255, 159, 64)',
          'rgb(255, 205, 86)',
          'rgb(75, 192, 192)'
        ],
        borderWidth: 1
      }]
    };



    //noData plugin block
    const noData = {
    id: 'noData',
    afterDatasetsDraw: ((chart, args, plugins) => {
        const {
        ctx, data, chartArea:
        {top, bottom, left, right, width, height} }
        = chart;
        ctx.save();

<!--No data so want to show not available-->
        if(data.datasets.length === 0){
    <!--    Grey color for rectangle-->
            ctx.fillStyle = 'rgba(102, 102, 102, 0.5)';
    <!--    Create rectangle covering the entire chart area-->
            ctx.fillRect(left, top, width, height);

    <!--    Text-->
            ctx.font = 'bold 25px sans-serif';
            ctx.fillStyle = '#1a4789';
            ctx.textAlign = 'center';
            ctx.fillText('No Data Available', left + width /2, top + height/2)
        }
    })
  };


    const bgColor = {
        id: 'bgColor',
        beforeDraw: (chart, steps, options) => {
            const { ctx, width, height } = chart;
            ctx.fillStyle = options.backgroundColor;
            ctx.fillRect(0, 0, width, height)
            ctx.restore();
        }
    }



    // config
    const config = {
      type: 'bar',
      data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
      plugins: [noData]
    };

    // render init block
    const myChart = new Chart(
      document.getElementById('myBarChart'),
      config
    );

        // DownloadPDF
    function downloadPDF(){
        const canvas = document.getElementById('myBarChart');

        //create image
        const canvasImage = canvas.toDataURL('image/jpeg', 1.0);
        console.log(canvasImage)

        //image must go to PDF (jsPDF() is an object)
        let pdf = new jsPDF('landscape');
        pdf.setFontSize(20);
        pdf.addImage(canvasImage, 'JPEG', 15, 15, 280, 150);
        pdf.text(15, 15, "Total Grades")
<!--    Giving the pdf file a name-->
        pdf.save('Grade.pdf');
    }
</script>


<script>
<!--Create a new custom chart type with features from Doughnut chart-->
class circularChart extends Chart.DoughnutController {
<!--draw everything based on 'DoughnutController'-->
    draw(){
        super.draw(arguments);
        const {
        ctx, data, chartArea:
        {top, bottom, left, right, width, height} }
        = this.chart;
        ctx.save();
        ctx.font= 'bold 30px san-serif';
        ctx.fillStyle = '#6996b6';
        ctx.textAlign = 'center';
        ctx.fillText(data.datasets[0].text, width/2, bottom);
    }
}

<!--'circularGauge' is the type-->
circularChart.id = 'circularGauge';
<!--Create a set of default specifically for this chart, having the DoughnutController as the default-->
circularChart.defaults = Chart.DoughnutController.defaults;
circularChart.defaults = {
<!--thickness-->
    cutout: '70%',
<!--have a half circle-->
    circumference: 180,
<!--rotate the circle -->
    rotation: 270
};

<!--This overrides the option-->
circularChart.overrides = {
<!--aspectRatio: 4  Width to length is 4 to 1-->
    aspectRatio: 4,
    plugins:{
        legend:{
            display: false
        },
        tooltips:{
            enabled: false
        }
    }
};

<!--To load or register the chart. Registering circularChart-->
Chart.register(circularChart);
let score = parseInt('{{ predictedscorecount }}');
    // setup
    const data = {
      labels: ['Predicted Score', 'Need to clear'],
      datasets: [{
        label: ' ',
        data: ['{{ predictedscorecount }}',
                '{{ predictedscorecountleft }}'],
        backgroundColor: [
          '#6996b6',
          '#f4f4f4'
        ],
        borderColor: [
          '#6996b6',
          '#f4f4f4'
        ],
        borderWidth: 1,
        text: '{{ predictedscorecount }}'
      }]
    };

    const bgColor = {
        id: 'bgColor',
        beforeDraw: (chart, steps, options) => {
            const { ctx, width, height } = chart;
            ctx.fillStyle = options.backgroundColor;
            ctx.fillRect(0, 0, width, height)
            ctx.restore();
        }
    }

    // config
    const config = {
      type: 'circularGauge',
      data,
      options: {
      },
      plugins: {
        bgColor: {
            backgroundColor: 'white'
        }
      }
    };

    // render init block
    const myChart = new Chart(
      document.getElementById('myDoughnutChart'),
      config
    );

    // DownloadPDF2
    function downloadPDF2(){
        const canvas = document.getElementById('myDoughnutChart');

        //create image
        const canvasImage = canvas.toDataURL('image/jpeg', 1.0);
        console.log(canvasImage)

        //image must go to PDF (jsPDF() is an object)
        let pdf = new jsPDF('landscape');
        pdf.setFontSize(20);
        pdf.addImage(canvasImage, 'JPEG', 15, 15, 280, 150);
        pdf.text(15, 15, "Total Grades")
<!--    Giving the pdf file a name-->
        pdf.save('Grade.pdf');
    }
</script>
